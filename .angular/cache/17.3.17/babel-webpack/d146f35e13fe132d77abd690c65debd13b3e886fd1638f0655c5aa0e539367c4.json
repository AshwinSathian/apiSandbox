{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./app.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./app.component.css?ngResource\";\nimport { Component, ViewChild } from '@angular/core';\nimport { ApiParamsComponent } from './components/api-params/api-params.component';\nlet AppComponent = class AppComponent {\n  constructor() {\n    this.hasIndexedDB = false;\n    this.pastRequests = [];\n  }\n  ngOnInit() {\n    this.openIndexedDB();\n  }\n  loadRequestHandler(request) {\n    this.apiParams.loadPastRequest(request);\n  }\n  openIndexedDB() {\n    this.openIDBrequest = window.indexedDB.open('savedRequests', 1);\n    this.openIDBrequest.onsuccess = event => {\n      this.indexedDB = event.target.result;\n      this.hasIndexedDB = true;\n      this.fetchPastRequests();\n    };\n    this.openIDBrequest.onerror = event => {\n      this.hasIndexedDB = false;\n    };\n    this.openIDBrequest.onupgradeneeded = event => {\n      this.indexedDB = event.target.result;\n      this.idbStore = this.indexedDB.createObjectStore('pastRequests', {\n        keyPath: '_id',\n        autoIncrement: true\n      });\n    };\n  }\n  fetchPastRequests() {\n    const transaction = this.indexedDB.transaction('pastRequests', 'readwrite');\n    const pastRequestsStore = transaction.objectStore('pastRequests');\n    pastRequestsStore.getAll().onsuccess = evt => {\n      this.pastRequests = evt.target.result;\n    };\n  }\n  clearPastRequests() {\n    const transaction = this.indexedDB.transaction('pastRequests', 'readwrite');\n    const pastRequestsStore = transaction.objectStore('pastRequests');\n    pastRequestsStore.clear().onsuccess = evt => {\n      this.pastRequests = [];\n    };\n  }\n  static {\n    this.ctorParameters = () => [];\n  }\n  static {\n    this.propDecorators = {\n      apiParams: [{\n        type: ViewChild,\n        args: [ApiParamsComponent, {\n          static: true\n        }]\n      }]\n    };\n  }\n};\nAppComponent = __decorate([Component({\n  selector: 'app-root',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], AppComponent);\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}